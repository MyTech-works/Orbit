(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3649],{93649:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return V}});var n=t(85893),a=t(2949),u=t(87757),o=t.n(u),i=t(92137),s=t(96156),c=t(34699),l=t(67294),f=t(99121),p=t(14516),d=t(93002),v=t(18127),h=t(11163),b=t(6411),m=t(50361),y=t.n(m),w=(t(78274),t(17701)),g=t(56294),O=t(34268),k=t(71134),x=t(94248),j=t(5904),P=t(81576),Z=t(9669),C=t.n(Z),q=t(34078),D=t.n(q),R=t(57631),A=t.n(R);t(53787);var S=t(35974),L=t(65780),B=t.n(L),M=t(19276),T=t.n(M),E=t(46489),_=t.n(E),I=t(82644);function N(e){if(!e)return!1;try{var r=_()(e).exp;return(0,I.Z)(new Date(1e3*r))}catch(t){return!1}}function K(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?K(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var G=k.CZ,Q=(0,S.setupCache)({maxAge:9e5,exclude:{paths:[],query:!1,filter:null}}),W={baseURL:k.aO};k.De&&(W.adapter=Q.adapter);var F=C().create(W);(0,p.isBrowser)()||(F.interceptors.request.use(function(){var e=(0,i.Z)(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(G)){e.next=4;break}return e.next=3,T()(k.aO,k.JD,k.fM);case 3:G=e.sent;case 4:return e.next=6,B()(Math.floor(1e3*Math.random())+10);case 6:return t=r.headers,(n=void 0===t?{}:t).Authorization="Bearer ".concat(G),e.abrupt("return",z(z({},r),{},{headers:n}));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),F.interceptors.response.use(null,function(){var e=(0,i.Z)(o().mark((function e(r){var t,n,a,u,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.config,n=r.response,!t||!n||502!==n.status){e.next=11;break}if(a=t.headers,i=(u=void 0===a?{}:a)["x-refrens-wr-retry"],s=void 0===i?10:i,!((s=Number(s))>0)){e.next=11;break}return console.info("wr retry",s,t.url),e.next=9,B()(Math.floor(1e3*Math.random())+10);case 9:return u["x-refrens-wr-retry"]=s-1,e.abrupt("return",F.request(z(z({},t),{},{headers:u})));case 11:return e.abrupt("return",Promise.reject(r));case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));var H=function(){var e=(0,i.Z)(o().mark((function e(r,t){var n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D()(k.I,r),t&&(n=A()(n,{name:t})),e.next=4,C().get(n);case 4:return a=e.sent,u=a.data,e.abrupt("return",u.data.map((function(e){return{label:e.name,value:e.key}})));case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}();function U(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function J(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?U(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var V=function(e){var r=e.requirementSteps,t=e.leadCategory,u=e.leadSubject,s=e.categories,m=e.referBlock,Z=e.withAuth,C=(0,h.useRouter)(),q=C.query,D=C.push,R=q[O.Z5],A=q.locale,S=q.urlKey,L=q[O.h6],B=q[O.id],M=(0,j.a)(),T=M.user,E=M.login,_=(0,P.G2)("referrers"),I=(0,P.G2)("requirements"),N=(0,P.G2)("uploadrequest11"),K=(0,P.G2)("businesses/".concat(k.lA,"/leads")),z=(0,d.Z)(),G=(0,c.Z)(z,2),Q=G[0],W=G[1],F=(0,l.useState)(),U=F[0],V=F[1],X=(0,x.qp)(),Y=(0,c.Z)(X,2),$=Y[0],ee=Y[1],re=(0,l.useRef)(),te=(0,l.useMemo)((function(){return B||u?"Looking for a ".concat(B||u):null}),[B,u]),ne=(0,l.useCallback)((function(e){var r=e.contact,n=e.questions,a={category:B?"other-services":t};if(e.subject||(a.subject=te),null!==n&&void 0!==n&&n.Industry){var u=n.Industry;a.industries=u,delete n.Industry}return $&&$[O.hT]&&(a.utm=$[O.hT]),T||Z||!r.email||(a.auth={name:r.name,email:r.email.toString().trim()}),J(J({},e),a)}),[$,T,t,u,B,Z,te]),ae=(0,l.useCallback)((0,i.Z)(o().mark((function e(){var r,t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.create({},{query:{isPrivate:!0}});case 2:r=e.sent,t=r.fields,n=r.url,W(J(J({},t),{},{url:n}));case 5:case"end":return e.stop()}}),e)}))),[]),ue=(0,l.useCallback)((function(e){var r="/hire/".concat(S,"?").concat(O.Z5,"=").concat(e);"en-in"!==A&&(r="/".concat(A).concat(r)),D("/[locale]/hire/[urlKey]?".concat(O.Z5,"=").concat(e),r,{shallow:!0})}),[A,S]),oe=(0,l.useCallback)((function(e,r){var t=y()(e),n=J({},r),a=t.auth;if(Z&&"object"===typeof a&&!Array.isArray(a)){if("signin"===(null===a||void 0===a?void 0:a.type)){var u=a.email,o=a.password;n=J(J({},n),(0,g.Z)(u,o)),delete t.auth}delete a.type}return{value:t,headers:n}}),[Z]),ie=(0,l.useCallback)(function(){var e=(0,i.Z)(o().mark((function e(t,n){var a,u,i,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length!==n.step+1){e.next=13;break}return a=oe(t,n.recaptchaHeader),u=a.value,i=a.headers,e.next=4,K.create(u,{headers:i});case 4:if(s=e.sent,c=s.accessToken,(0,w.L9)("BusinessRefer","NewLead"),window.scrollTo({top:0,behavior:"smooth"}),!c){e.next=12;break}return e.next=11,E({accessToken:c});case 11:(0,w.L9)("Onboarding","signin"===(null===(l=t.auth)||void 0===l?void 0:l.type)?"Login":"Signup","BusinessRefer");case 12:return e.abrupt("return",Promise.resolve(s));case 13:return(0,w.L9)(n.params.category||"BusinessRefer",n.params.action||"BusinessReferDetailsDone",n.params.label||"Continue"),ue(r[n.step+1].urlKey),e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[K,r,ue,w.L9,E,oe]),se=(0,l.useCallback)(function(){var e=(0,i.Z)(o().mark((function e(t,n){var a,u,i,s,c,l,f,p,d,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window,u=a.innerHeight,i=a.innerWidth,s=function(){return window.matchMedia?window.matchMedia("(orientation: landscape)").matches?"landscape":window.matchMedia("(orientation: portrait)").matches?"portrait":null:window.screen.width<window.screen.height?"portrait":"landscape"},c={ua:navigator.userAgent,viewPort:{height:u,width:i,orientation:s()},isMobile:navigator.userAgent.includes("Mobile")},l={userDevice:c},f=J(J({},t),{},{meta:l}),!m){e.next=7;break}return e.abrupt("return",ie(f,n));case 7:if(r.length!==n.step+1){e.next=20;break}return p=oe(f,n.recaptchaHeader),d=p.value,e.next=11,I.create(ne(d));case 11:if(v=e.sent,(0,w.L9)("Requirements","NewRequirement"),T){e.next=18;break}if((0,w.L9)("Requirements","Signup"),!v.accessToken){e.next=18;break}return e.next=18,E({accessToken:v.accessToken});case 18:return $&&$[O.hT]&&($[O.hT]=null,ee($)),e.abrupt("return",Promise.resolve(v));case 20:return(0,w.L9)(n.params.category||"Requirement",n.params.action||"ReqDetailsDone",n.params.label||"Continue"),ue(r[n.step+1].urlKey),e.abrupt("return",Promise.resolve());case 23:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[r,ne,I,w.L9,E,ue,$,m,oe]),ce=(0,l.useCallback)((0,i.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof L){e.next=5;break}return e.next=3,_.get(L);case 3:r=e.sent,V(r);case 5:case"end":return e.stop()}}),e)}))),[_,L]),le=(0,l.useCallback)((function(e,r){if(r)D(r.link.href,r.link.as);else{var t="/hire/other-services?".concat(O.id,"=").concat(e);"en-in"!==A&&(t="/".concat(A).concat(t)),D("/[locale]/hire/[urlKey]?".concat(O.id,"=").concat(e),t,{shallow:!0})}}),[D,A]),fe=(0,l.useMemo)((function(){return null!==s&&void 0!==s&&s.length?le:null}),[!(null===s||void 0===s||!s.length),le]);(0,v.Z)((function(){ae()})),(0,l.useEffect)((function(){ce()}),[L]),(0,l.useEffect)((function(){if(R){var e,t=r.findIndex((function(e){return e.urlKey===R}));if(-1!==t)null===(e=re.current)||void 0===e||e.setActiveStep(t)}else{var n;null===(n=re.current)||void 0===n||n.setActiveStep(0)}(0,p.isBrowser)()&&window.scrollTo({top:0,behavior:"smooth"})}),[R]);var pe=(0,l.useMemo)((function(){return r.map((function(e){var r=e.questions;return J(J({},(0,a.Z)(e,["questions"])),{},{questions:r.map((function(e){var r=e.input,t=(0,a.Z)(e,["input"]),n=r.__component,u=r.params;if("form.select"===n){var o=(u||{}).resource;if("string"===typeof o)return J(J({},t),{},{input:J(J({},r),{},{onInputChange:function(e){return H(o,e)}})})}return J(J({},t),{},"form.email"===n?{input:J(J({},r),{},{disAllowedEmail:m&&(null===T||void 0===T?void 0:T.email)})}:{input:r})}))})}))}),[]);return(0,n.jsx)(b.xu,{width:1,my:"-20px",children:(0,n.jsx)(f.RequirementForm,J(J({},e),{},{requirementSteps:pe,referrer:U,ref:re,privateS3Props:Q,onSubmit:se,user:T,subject:te,auth:!!T,onSearch:fe,isReferBlock:m}))})}},56294:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(31483),a=t.n(n);function u(e,r){return{Authorization:"Basic ".concat(a()("".concat(e,":").concat(r)))}}},19276:function(e,r,t){var n=t(87757),a=t(48926),u=t(9669);function o(){return(o=a(n.mark((function e(r,t,a){var o,i,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post("".concat(r,"/auth/local"),{identifier:t,password:a});case 2:return o=e.sent,i=o.data,s=i.jwt,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports=function(e,r,t){return o.apply(this,arguments)}},94248:function(e,r,t){"use strict";t.d(r,{r2:function(){return h},P6:function(){return b},WN:function(){return m},RV:function(){return y},qp:function(){return w}});var n=t(85893),a=t(96156),u=t(34699),o=t(67294),i=t(89211),s=t(14516),c=t(11163),l=t(5904),f=t(34268);function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v=(0,o.createContext)({});function h(e){var r,t=e.children,o=(0,c.useRouter)().query,p=(0,s.useLocalForage)(f.nv,null),h=(0,u.Z)(p,2),b=h[0],m=h[1],y=(0,i.Z)(!1),w=(0,u.Z)(y,2),g=w[0],O=w[1],k=(0,i.Z)(!0),x=(0,u.Z)(k,2),j=x[0],P=x[1],Z=((0,l.a)().user||{}).businesses,C=void 0===Z?[]:Z,q=C.filter((function(e){return!e.isRemoved})),D=(0,u.Z)(q,1)[0];if(b){var R=C.find((function(e){return e._id===b}));R?D=R:m(null)}var A=o,S=A.utm_medium,L=A.utm_source,B=A.utm_campaign,M=A.utm_term,T=A[f.h6],E=A[f.zW],_=(0,s.useLocalForage)(f.GN,(r={},(0,a.Z)(r,f.h6,T),(0,a.Z)(r,f.hT,null),(0,a.Z)(r,f.zW,E),r)),I=(0,u.Z)(_,2),N=I[0],K=I[1];(0,s.useLazyEffect)((function(){var e={};S&&L&&B&&(e[f.hT]={medium:S,source:L,campaign:B,term:"string"===typeof M?decodeURI(M):void 0}),"string"===typeof T&&(e[f.h6]=T),"string"===typeof T&&(e[f.h6]=T),Object.keys(e).length&&K(d(d({},N),e))}),[S,L,B,M,T,E]);var z={activeBusiness:D,setActiveBusiness:m,crispReady:g,markCrispReady:function(){return O(!0)},asideCollapsed:j,setAsideCollapsed:P,apiQuery:N,saveAPIQuery:K};return(0,n.jsx)(v.Provider,{value:z,children:t})}function b(){return(0,o.useContext)(v)}function m(){var e=(0,o.useContext)(v);return[e.activeBusiness,e.setActiveBusiness]}function y(){var e=(0,o.useContext)(v);return[e.asideCollapsed,e.setAsideCollapsed]}function w(){var e=(0,o.useContext)(v);return[e.apiQuery,e.saveAPIQuery]}}}]);